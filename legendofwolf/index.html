<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ç‹¼çš„ä¼ è¯´ Legend of Wolf</title>
    <script src="../phaser.min.js"></script>
    <script src="./js/plus.js"></script>
    <script src="./assets/sprites/wolf.js"></script>
    <script src="./assets/sprites/restore.js"></script>
    <script src="./assets/sprites/rattan.js"></script>
    <script src="./assets/sprites/ridding.js"></script>
    <style>
        body{
            margin: 0%;
            padding: 0%;
        }
    </style>
</head>
<body>
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-FW4M5RXDKZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FW4M5RXDKZ');
</script>

       <script src=https://mngz47.github.io/monetize/api.js ></script>
       <script src=https://mngz47.github.io/monetize/cookie.js ></script>
       <script src=https://mngz47.github.io/monetize/paypal.js ></script>
       <script src=https://mngz47.github.io/monetize/payfast.js ></script>
       

<h4 onclick="toggle(e('start'));" id=credits style='position:absolute;float:right;margin:4px;background:rgba(0,0,0,0.7);color:white;' ></h4>    
<div id=start style="position: absolute;top:0;background-color:rgba(0,0,0,0.7);width:100%;height:100%;z-index:1000;padding:40px;y-overflow:auto;" >
   <a href=# onclick="toggle(e('start'));" ><h6 style="color:white;" id=buy_credits >Buy Credits:</h6></a>
   <div style='margin-top:10px;color:white;' >
	   <label>Credit Card<input type=checkbox id=credit_card  /></label>
	   <label>PayPal<input type=checkbox id=paypal_option  /></label>
	   <br><br>
	   <input type=number id=credits value=40 placeholder=credits />
	   <button onclick='monetize_purchase(e("credits").value);return false;' >buy</button>
   </div>
	
	<script src="https://mngz47.github.io/monetize/search.js" ></script>
	 <div style='float:right;margin-top:10px;' ><input type=text id=search_game placeholder=games /><button onclick='search(e("search_game").value);return false;' >search</button></div>
          <div id=search_results style="position:absolute;float:right;" ></div>

   <div id=menu style="overflow-x:auto;overflow:hidden;height:200px;width:100%;"></div>

	<div class=row >
		<div class=col-sm-6 ><div id=menu-text style="color:white;padding:40px;"></div></div>
		<div class=col-sm-6 >
			<div id='amazon_products' style='display:none' >


		<span class=title >Nepal vs. ZA | clouded judge until I ran out of time</span>
		<p>-<a href="https://www.youtube.com/watch?v=NK3DWlgCv14" >Video</a></p>
	
		<span class=title >Stuck on stage 3 formulating movement | classic flower snake</span>
		<p>-<a href="https://www.youtube.com/watch?v=7QKCJW8hCbQ" >Video</a></p>
	
		<span class=title >Won the houses price in the first 46 seconds | Pamel Slots</span>
		<p>-<a href="https://www.youtube.com/watch?v=EU_P_WEsYug" >Video</a></p>
	
		<span class=title >Japan vs. ZA on chess.com | won last 57 seconds</span>
		<p>-<a href="https://www.youtube.com/watch?v=pw2rfk4BUOo" >Video</a></p>
	
		<span class=title >Ended up on stage 7 on the 29th minute | Classic Flower Snake</span>
		<p>-<a href="https://www.youtube.com/watch?v=pZROcOdfnBg" >Video</a></p>
	
		<span class=title >Turkey vs. ZA on chess.com | resigned after a good fight</span>
		<p>-<a href="https://www.youtube.com/watch?v=e9mT2Hrc-sg" >Video</a></p>
	
		<span class=title >Stuck on stage 2 but in the end skipped 2 stages | Classic Flower Snake</span>
		<p>-<a href="https://www.youtube.com/watch?v=yk4l24fq6g8" >Video</a></p>
	
		<span class=title >India vs. ZA on chess.com | gave a good fight before forfeit</span>
		<p>-<a href="https://www.youtube.com/watch?v=ysQFgJuyo_w" >Video</a></p>
	
		<span class=title >After skipping stage 2 and 5 I made it to the blue obstacle stage 6 | Classic Flower Snake</span>
		<p>-<a href="https://www.youtube.com/watch?v=VF_H9xse6FY" >Video</a></p>
	
		<span class=title >India vs. ZA on chess.com | 30 min of torture</span>
		<p>-<a href="https://www.youtube.com/watch?v=WpHd3HD9Jqw" >Video</a></p>
	
		<span class=title >Classic Flower Snake P5 | Reached Stage 5</span>
		<p>-<a href="https://www.youtube.com/watch?v=A1B95yFU2kc" >Video</a></p>
	
		<span class=title >India(rishi_788) vs. ZA on chess.com | quickly resigned</span>
		<p>-<a href="https://www.youtube.com/watch?v=-ByIx0s1Y7Y" >Video</a></p>
	
		<span class=title >classic flower snake p4 | reached stage 3</span>
		<p>-<a href="https://www.youtube.com/watch?v=ZXnXq9aiJ9A" >Video</a></p>
	
		<span class=title >Costa Rica(sheepwar29) vs. ZA on chess.com | quickly resigned</span>
		<p>-<a href="https://www.youtube.com/watch?v=R__rDDIDTDo" >Video</a></p>
	
		<span class=title >classic flower snake p3 | reached stage 4</span>
		<p>-<a href="https://www.youtube.com/watch?v=g1Si46GmvDs" >Video</a></p>
	
		<span class=title >Turkey vs. ZA on chess.com | total destruction</span>
		<p>-<a href="https://www.youtube.com/watch?v=SDxC5JlXvBc" >Video</a></p>
	
		<span class=title >Classic Snake Game Part 2 | Flying Cam Cast | Stuck On Stage 1</span>
		<p>-<a href="https://www.youtube.com/watch?v=HtqXE1LB9H8" >Video</a></p>
	
		<span class=title >India vs ZA on chess.com - Exploring Nature Challenge</span>
		<p>-<a href="https://www.youtube.com/watch?v=ZN_J6n9lpK4" >Video</a></p>
	
		<span class=title >South Africa vs. Japan on Chess.com - Dealing with Online Harassment ğŸ˜</span>
		<p>-<a href="https://www.youtube.com/watch?v=mxXAN9cQawA" >Video</a></p>
	
		<span class=title >Flower Snake Game - All The Way To Stage 3 - Challenge Prep</span>
		<p>-<a href=https://www.youtube.com/watch?v=RBlp_BwALH0 >Video</a></p>
	
		<span class=title >Why South African Forex Traders Need Quants</span>
		<p>Quantitative trading, or â€œquantâ€ trading, is a sophisticated approach that involves using mathematical models and algorithms to analyze vast datasets and execute trading strategies. In the dynamic world of finance, these quant machines rely on a myriad of fundamental indicators to make buy and sell decisions.
		<a href=https://mngz636.medium.com/why-south-african-forex-traders-need-quants-d0cfb5f77fe6 >Article</a>-<a href=https://www.youtube.com/watch?v=xr09cilI-yI >Video</a>
		</p>
	
		<span class=title >A Skill Everyone Should Have (bank leverage), Get NYDF Funding.</span>
		<p>Understanding the intricacies of banking, loans, and financial planning is indeed crucial for navigating the complex landscape of personal and business finance.
		<a href=https://mngz636.medium.com/a-skill-everyone-should-have-bank-leverage-get-nydf-funding-85c3797c53a3 >Article</a>-<a href=https://www.youtube.com/watch?v=8Bl9YZW9Zfk >Video</a>
		</p>
	
		<span class=title >Specialized Software Using Framework and API of Established Businesses</span>
		<p>Why start from square one when you can ride the wave of success with the giants? Imagine this: instead of painstakingly building your own audience, leverage the colossal user base of industry titans to showcase your skills and skyrocket your success.
		<a href=https://mngz636.medium.com/specialized-software-using-framework-and-api-of-established-businesses-5620648545ab >Article</a>-<a href=https://www.youtube.com/watch?v=eZ6vpWpMlPI >Video</a>
		</p>
	
		<span class=title >I Stopped Doing My Homework To Focus On Girls At 6th Grade ğŸ˜…</span>
		<p>It all began when the complexities of reading in English became a formidable obstacle in my academic path. Frustration and difficulty led me to make a radical decision â€” I stopped doing homework. It was a bold move, one that reflected a desire to redefine my priorities and focus on what I believed truly mattered.
		<a href=https://mngz636.medium.com/i-stopped-doing-my-homework-to-focus-on-girls-at-6th-grade-6048a1ca52f1 >Article</a>-<a href=https://www.youtube.com/watch?v=PX6iKC9FW7w >Video</a>
		</p>
	
		<span class=title >Creating A Travel Website With sites.google.com â€” In An Hour â€” For Free</span>
		<p>Unlock the power of cutting-edge web building features without breaking the bank! Say goodbye to the financial woes and coding setbacks with sites.google.com â€” your ticket to free, stable hosting thatâ€™s both sophisticated and reliable.
		<a href=https://mngz636.medium.com/creating-a-travel-website-with-sites-google-com-in-an-hour-for-free-97b5177a91c7 >Article</a>-<a href=https://www.youtube.com/watch?v=ztbU1NVRJYE >Video</a>
		</p>
	
		<span class=title >My First Github Repository (Black Box)</span>
		<p>In the wake of a disheartening experience where all my hard work was pilfered and erased, I made a resolute decision to take control of my code and embrace the collaborative power of GitHub. It was time to turn the page and navigate the world of version control, learning that sometimes, joining the ranks of collaborators is the key to safeguarding oneâ€™s creations. As the saying goes, â€œIf you canâ€™t beat them, join them.â€
		<a href=https://mngz636.medium.com/my-first-github-repository-black-box-a50b4f93b6ab >Article</a>-<a href=https://www.youtube.com/watch?v=NHdD5ilUg1s >Video</a>
		</p>
	
		<span class=title >PHP Remote Text Writer/Editor Github Repository</span>
		<p>Now, hereâ€™s the deal: Weâ€™re not just building features; weâ€™re crafting an experience. An experience that screams innovation, collaboration, and a touch of developer genius. Weâ€™re inviting you to be a part of this journey â€” to shape, enhance, and bring your unique skills to the table.
		<a href=https://mngz636.medium.com/php-remote-text-writer-editor-github-repository-9a7014362aa1 >Article</a>-<a href=https://www.youtube.com/watch?v=lcSJs95cEFM >Video</a>
		</p>
	
		<span class=title >Kasi Nametest â€” Testing Ten South African Girl Names</span>
		<p>â€œKasi Namatestâ€ sounds like an incredibly engaging and culturally resonant game! Drawing inspiration from the popular name tests on platforms like Facebook is a clever move, given the widespread interest people have in exploring aspects of their own identity.
		<a href=https://mngz636.medium.com/kasi-nametest-testing-ten-south-african-girl-names-b25c1ac92b92 >Article</a>-<a href=https://www.youtube.com/watch?v=B4RgQEuzcLY >Video</a>
		</p>
	
		<span class=title >F Snake Easy vs. Hard Mode</span>
		<p>In the midst of the challenging times brought about by Covid-19, I found myself unexpectedly without my employer. Before he passed away, his cryptic words lingered, â€œI can help you, only mom F can tell you the truth â€” itâ€™s the snake.
		<a href=https://mngz636.medium.com/f-snake-easy-vs-hard-mode-d09ac064d4b0 >Article</a>-<a href=https://www.youtube.com/watch?v=dB3Bdr9t0FY >Video</a>
		</p>
	
		<span class=title >How to generate your CV in 3 minutes</span>
		<p>Embark on a hassle-free journey to create your professional CV in just three minutes â€” for free! Drawing from my experience at Philippi Brownâ€™s Farm Internet CafÃ©, where I diligently crafted over 100 CVs, Iâ€™ve come to understand the crucial need for a service like this, especially for individuals stepping into the job market.
		<a href=https://mngz636.medium.com/how-to-generate-your-cv-in-3-minutes-b55e452f90ab >Article</a>-<a href=https://www.youtube.com/watch?v=57kS-89h9-E >Video</a>
		</p>	
		
		<span class=title >Introduction To Productlists</span>
		<p>Productlists is a tech firm working towards solutions to free the youth. Enjoy our instant game service, product listings and reviews.</p>	
		<span class=title >Kasi Nametest</span>
		<p>South African local instant game - enter your name and find out with Mzansi kasi you are from.</p>
		<span class=title >Recreational Activies In Newcastle South Africa</span>
		<p>Get the latest business and tourist information about Newcastle. Learn about Accommodation, Job Recruitment and more.</p>
		<span class=title >F-Snake Classic Productlists Game</span>
		<p>Play our classic snake game with seven stages. Overcome the obstacle and score as much points as you can.</p>
		<span class=title >F-Snake Classic Productlists Game</span>
		<p>Play our classic snake game. As you progress in the stages the obstacle moves faster and faster.</p>
		<span class=title >Touch Bistro Restaurant POS</span>
		<p>Replace your printed out food menu with a digital tablet menu able to send orders directly to kitchen without calling for waiter.</p>
		<span class=title >Touch Bistro Digital Menu and Payment</span>
		<p>Collect more information during payment so you can resell your specials to frequent customers.</p>
		<span class=title >CV Engine</span>
		<p>Generate Your CV For FREE in 3 minutes and send it to your email.</p>
		<span class=title >Stop Paying For Traffic.</span>
		<p>Saas and other large companies that need to pay for advertising on a monthly basis can create a content division in their businesses.</p>	
		<span class=title >Jungle Scout</span>
		<p>Use the best tools to sell on Amazon, optimize your listing - access best selling keywords and automatic repricing.</p>
		<span class=title >Adzooma</span>
		<p>Automate and manage all your Google, Facebook and Microsoft Ads in one place. Award winning App.</p>
		</div>
<iframe id=yt_tv width="100%" ></iframe>
<div class=row >
<div style="width:80%;float:left;" >
<a id=yt_title href=# onclick="nextVideo();return false;" class="block" style="background-repeat:no-repeat;background-size:50px auto;background-postion:0 0;padding-left:55px;display:block;width:100%;" ></a>
</div>
<div style="width:18%;float:left;" >
<a href=# onclick="nextVideo();return false;" class="block" style="width:100%;" >next video</a>
</div>
</div>
<div id=group_four_affiliate_video_dd style="padding:4px;font-size:1.3em;" >Productlists is a tech firm working towards solutions to free the youth. Enjoy our instant game service, product listings and reviews.</div>
		
		</div></div>
	<div style="float:right;color:white;" >
<a class=space href=https://www.instagram.com/productlists >Instagram</a>-<a class=space href=https://mngz47.github.io/mongeziSibongakonke/docs/ >Docs</a>-<a style="float:right" href="https://mngz47.github.io/pamel_slots/privacy_policy.html" >Privacy Policy</a>
	</div>
	
	</div>

	<script src=https://mngz47.github.io/monetize/monetize.js ></script>
	<script src="https://mngz47.github.io/monetize/video/api.js" ></script>
	<script src="https://mngz47.github.io/monetize/menu.js" ></script>


<link rel=stylesheet href=https://mngz47.github.io/monetize/style.css />
<link rel=stylesheet href=https://mngz47.github.io/monetize/bootstrap.min.css />

</div> 
   <script>
      toggle(e("start"));
   </script>
</body>
<script>
// import './js/libs/weapp-adapter'
// import Phaser from './js/libs/phaser-wx.js'
// import Demon from './assets/demon.js'
//æŠ€èƒ½å›¾æ ‡ 1.é˜²å¾¡0 2.æˆ˜æ–§0 3.é£æš´3% 4.æ»šçŸ³10% 5.è—¤æ›¼5% 6.å†°æŸ±5% 7.é£è·ƒ10% 8.ä¸‰å¶è‰20% 9.é’¢å‰15%
onload = function(){
    var gameScore = 0;
  var game = new Phaser.Game({
    width: 710,
    height: 580,
    renderer: Phaser.CANVAS,
    // canvas: canvas,
  });
  var gameState = function (game) {
    this.create = function () {
      this.game.physics.startSystem(Phaser.Physics.ARCADE);//å¼€å¯ç‰©ç†å¼•æ“
      this.bg = this.add.image(0,0,'background');//èƒŒæ™¯
      this.grass = this.add.image(0,0,'battlefield');//è‰åª
      this.underRails = this.add.sprite(0,0,'under-rails');//åº•åº§
      this.game.physics.arcade.enable(this.underRails);
      this.rails = this.add.image(0,0,'rails');//æ»‘é“
      this.rails.y = 81;
      this.underRails.y = 81;
      this.underRails.width = this.rails.width;
      this.underRails.height = this.rails.height;
      this.sky = this.add.image(0,0,'sky');//å¤©ç©º
      this.earth = this.add.image(0,0,'earth');//åœŸåœ°
      this.wagon = this.add.image(0,this.underRails.y -10,'wagon');//æ»‘æ¿ ç¬¬ä¸€é“-10 ç¬¬äºŒé“60 ç¬¬ä¸‰é“130 ç¬¬å››é“200 ç¬¬äº”é“270 ç¬¬å…­é“340 ç´¯åŠ 70
      this.wires = this.add.sprite(this.underRails.width,this.underRails.y,'wires');//è†æ£˜
      this.wires.active = false;//éœ€è¦æŠ€èƒ½å›¾æ ‡1 é˜²å¾¡ æ¿€æ´»
      this.wires.hp = 20;
      this.wires.hp_ = this.wires.hp;
      this.wires.dt = 0;
      this.wires.alpha = 0;
      this.game.physics.arcade.enable(this.wires);
      this.wolf = this.add.image(7,this.wagon.y - 40,'wolf');//ç‹¼
      this.wolf.y_ = this.wolf.y;
      this.wolf.animations.add('walk', [4, 5, 6, 7], 3, true);
      this.wolf.animations.add('attack', [0,1, 2, 3], 5, true);
      this.attack = false;
      this.wolf.animations.play('walk');
      this.wolf.bulletSpeed = 60;//quicken åŠ å¿« æ›´æ´»è·ƒ
      this.axe = this.add.image(0,0,'axe');//æ­¦å™¨axe hp==1
      this.axe.alpha = 0;
      this.fork = this.add.image(0,0,'fork');//æ­¦å™¨fork hp==2
      this.fork.alpha = 0;
      this.weapon = this.add.weapon(50,'axe');//æ­¦å™¨  //ä¼˜åŒ–æ—¶ æ›´æ¢ä¸ºgroup weapon.bullets å­å¼¹è¡Œä¸º
      if (this.weapon.bullets.children[0].key=='axe') {//æ­¦å™¨è€æ€§
          this.weapon.hp = 1; 
      }
      if (this.weapon.bullets.children[0].key=='fork') {//å€¼
          this.weapon.hp = 3; 
      }
      this.weapon.bulletKillType = Phaser.Weapon.KILL_WORLD_BOUNDS;
      this.weapon.fireAngle = Phaser.ANGLE_RIGHT;
      this.weapon.bulletAngleOffset = 90;
      this.weapon.bulletSpeed = 400;
      this.weapon.fireRate = 60;
      this.weapon.trackSprite(this.wolf, this.wolf.width, this.wolf.height/1.3);
      this.pigs = this.add.group();//çŒª
      this.pigs.enableBody = true;
      this.skills = this.add.group();//æŠ€èƒ½å›¾æ ‡
      for (var i = 0; i < 9; i++) {
          let skillIcon = this.skills.create(0,0,'skills');
          skillIcon.x = 13 + i * skillIcon.width + i * 13;
          skillIcon.y = this.bg.height - 13 - skillIcon.height;
          skillIcon.frame = i;
          skillIcon.inputEnabled = true;
        //   if (i>0) {skillIcon.alpha = 0;}
      }
      this.storm = this.add.group();//æŠ€èƒ½å›¾æ ‡3 é£æš´ å°†æ•Œäººæ¨å‡ºè¾¹ç•Œ
      this.storm.enableBody = true;
      this.stone = this.add.group();//æŠ€èƒ½å›¾æ ‡4 æ»šçŸ³ ç¢¾è¿‡æ•Œäºº
      this.stone.enableBody = true;
      this.rattan = this.add.group();//æŠ€èƒ½å›¾æ ‡5 è—¤æ›¼ è¿Ÿç¼“è¯…å’’
      this.rattan.enableBody = true;
      this.ice = this.add.group();//æŠ€èƒ½å›¾æ ‡6 å†°å†» å†»ä½æ•Œäºº
      this.ice.enableBody = true;
      this.skills.getChildAt(0).events.onInputDown.add(function(){//æŠ€èƒ½å›¾æ ‡1 é“å…· è†æ£˜é˜²å¾¡
        this.wires.active = true;
        game.add.tween(this.wires).to( { alpha: 1 }, 3000, "Linear", true).onComplete.add(function(){
            this.wires.act = true;
        },this);
        this.skillMask(this.skills.getChildAt(0),100000000);
      }, this);
      this.skills.getChildAt(1).events.onInputDown.add(function(){//æŠ€èƒ½å›¾æ ‡2 æ­¦å™¨ æˆ˜æ–§
        this.attack = true;
        this.wolf.animations.play('attack');
        this.weaponReplace(this.weapon,this.axe,this.fork,1);
        this.skillMask(this.skills.getChildAt(1),1000000);
      }, this);
      this.skills.getChildAt(2).events.onInputDown.add(function(){//æŠ€èƒ½å›¾æ ‡3 æŠ€èƒ½ é£æš´
        if (this.energyEnabled == false) {
            return false;
        }
        this.energy.width -= (this.energy.sum * 3/100);
        if (this.storm.length>0) {//é£æš´å‡ºç•Œ é£æ¶ˆäº‘æ•£
            for (var i = 0; i < this.storm.length; i++) {
                if (this.storm.getChildAt(i).x>this.game.world.width) {
                    this.storm.getChildAt(i).destroy();
                }
            }
        }
        for (var i = 0; i < 6; i++) {//å…­ä¸ªé“è·¯
            this.storm_ = this.storm.create(0,0,'storm');
            this.storm_.scale.set(2.5);
            this.storm_.x = this.underRails.width;
            this.storm_.y = 70 + i * 70;
            this.storm_.animations.add('storm',[0,1,2,3],5,true);
            this.storm_.animations.play('storm'); 
            this.storm_.body.velocity.x = 300;
        }
        this.skillMask(this.skills.getChildAt(2),3000);//3s
      }, this);
      this.skills.getChildAt(3).events.onInputDown.add(function(){//æŠ€èƒ½å›¾æ ‡4 æŠ€èƒ½ æ»šçŸ³
        this.iceTo = false;
        if (this.energyEnabled == false) {
            return false;
        }
        this.energy.width -= (this.energy.sum * 1/10);
        if (this.stone.length>0) {//æ»šçŸ³å‡ºç•Œ
            for (var i = 0; i < this.stone.length; i++) {
                if (this.stone.getChildAt(i).x>this.game.world.width) {
                    this.stone.getChildAt(i).destroy();
                }
            }
        }
        for (var i = 0; i < 6; i++) {//å…­ä¸ªé“è·¯
            this.stone_ = this.stone.create(0,0,'stone');
            this.stone_.scale.set(2);
            this.stone_.x = this.underRails.width + this.wires.width - this.stone_.width;
            this.stone_.y = i * 70;
            this.stone_.animations.add('stone',[0,1,2,3,4,5,6,7,8,9],5,true);
            this.stone_.animations.play('stone'); 
            this.stone_.body.velocity.x = 500;
        }
        this.skillMask(this.skills.getChildAt(3),10000);//10s
      }, this);
      this.skills.getChildAt(4).events.onInputDown.add(function(){//æŠ€èƒ½å›¾æ ‡5 é“å…· è—¤æ›¼ è¿Ÿç¼“è¯…å’’
        if (this.energyEnabled == false) {
            return false;
        }
        this.energy.width -= (this.energy.sum * 1/20);
        for (let i = 0; i < this.pigs.length; i++) {//ç”Ÿæˆæ•Œäººæ•°ç›®çš„è—¤æ›¼
            this.rattan_ = this.rattan.create(0,0,'rattan');
            this.rattan_.scale.set(.5);
            this.rattan_.animations.add('rattan');
            this.rattan_.x = this.pigs.getChildAt(i).x - this.pigs.getChildAt(i).width/2;
            this.rattan_.y = this.pigs.getChildAt(i).y;
            this.pigs.getChildAt(i).body.velocity.x = -30;
            var that = this;
            this.rattan_.animations.play('rattan',5).onComplete.add(function(){//å†»ä½æ•ŒäººåŠ¨ç”» å®Œæ¯•åè§£å†»
                that.rattan.destroy();             
                that.rattan = this.add.group();
                that.rattan.enableBody = true;
            }, this);
        }
        this.skillMask(this.skills.getChildAt(4),5000);//5s
      }, this);
      this.skills.getChildAt(5).events.onInputDown.add(function(){//æŠ€èƒ½å›¾æ ‡6 æŠ€èƒ½ å†°å†»
        if (this.iceTo==false) {
            return false;//æ˜¯å¦å¯ä»¥ä½¿ç”¨ice é˜²æ­¢å‡ºé”™
        }
        if (this.energyEnabled == false) {
            return false;
        }
        this.energy.width -= (this.energy.sum * 1/20);
        if (this.ice.length>0) {//å†°æŸ±æ¶ˆè
            this.ice.destroy();
            this.ice = this.add.group();
            this.ice.enableBody = true;
        }
        for (let i = 0; i < this.pigs.length; i++) {//ç”Ÿæˆæ•Œäººæ•°ç›®çš„å†°æŸ±
            if (this.pigs.getChildAt(i).active) {
                this.ice_ = this.ice.create(0,0,'ice');
                this.ice_.x = this.pigs.getChildAt(i).x - this.pigs.getChildAt(i).width/2;
                this.ice_.y = this.pigs.getChildAt(i).y;
                this.pigs.getChildAt(i).body.velocity.x = 0;
                this.pigs.getChildAt(i).animations.stop();
                this.pigs.getChildAt(i).ice = true;
                this.pigs.getChildAt(i).iceIndex = i;
                this.ice_.animations.add('ice',[0,1,2,3,4,5,6],3,false);
                var that = this;
                this.ice_.animations.play('ice').onComplete.add(function(){//å†»ä½æ•ŒäººåŠ¨ç”» å®Œæ¯•åè§£å†»
                    if (that.pigs.getChildAt(i)) {
                        that.ice.getChildAt(i).kill();
                        that.pigs.getChildAt(i).ice = false;
                        that.pigs.getChildAt(i).animations.play('walk');
                        that.pigs.getChildAt(i).body.velocity.x = -100;
                    }                
                }, this);
            } else {
                continue;
            }
        }
        this.skillMask(this.skills.getChildAt(5),5000);//5s
      }, this);
      this.skills.getChildAt(6).events.onInputDown.add(function(){//æŠ€èƒ½å›¾æ ‡7 æŠ€èƒ½ åŠ é€Ÿ
        if (this.energyEnabled == false) {
            return false;
        }
        this.energy.width -= (this.energy.sum * 1/10);
        this.wolf.bulletSpeed = 30;
        var that = this;
        this.skillMask(this.skills.getChildAt(6),10000,function(){
            that.wolf.bulletSpeed = 60;
        });
      }, this);
      this.skills.getChildAt(7).events.onInputDown.add(function(){//æŠ€èƒ½å›¾æ ‡8 é“å…· ä¸‰å¶è‰ æ²»æ„ˆ
        if (this.energyEnabled == false) {
            return false;
        }
        this.energy.width -= (this.energy.sum * 1/5);
        this.skillMask(this.skills.getChildAt(7),12000);
        this.restore = this.add.image(0,0,'restore');
        this.restore.scale.set(3);
        this.restore.animations.add('restore');
        var that = this;
        this.restore.animations.play('restore',3).onComplete.add(function(){
            that.restore.destroy();
            that.life.width = that.life.sum;
        }, this);
      }, this);
      this.skills.getChildAt(8).events.onInputDown.add(function(){//æŠ€èƒ½å›¾æ ‡9 æ­¦å™¨ é’¢å‰
        if (this.energyEnabled == false) {
            return false;
        }
        this.energy.width -= (this.energy.sum * 15/100);
        this.weaponReplace(this.weapon,this.axe,this.fork,2);
        var that = this;
        this.skillMask(this.skills.getChildAt(8),10000,function(){
            that.weaponReplace(that.weapon,that.axe,that.fork,1);
        });
      }, this);
      ///////////////////////////////////////////////////////////
      this.add.image(0,0,'life-bar');//è¡€æ§½
      this.life = this.add.image(0,0,'life-bar-filled');//è¡€é‡
      this.life.sum = this.life.width;
      this.add.image(0,this.life.height,'energy-bar');//èƒ½é‡æ§½
      this.energy = this.add.image(0,this.life.height,'energy-bar-filled');//èƒ½é‡
      this.energy.sum = this.energy.width;
      this.energyEnabled = true;
      ///////////////////////////////////////////////////////////æ¸¸æˆè¿›åº¦æ¡
      this.progressBarBelow = this.add.image(0,0,'progress-bar-below');
      this.progressBarOver = this.add.image(0,0,'progress-bar-over');
    //   this.progressBarBelow.anchor.set(.5);
    //   this.progressBarBelow.x = this.world.centerX;
    //   this.progressBarBelow.y = this.progressBarBelow.height*1.7;
    //   this.progressBarOver.x = this.progressBarBelow.x - this.progressBarOver.width/2;
    //   this.progressBarOver.y = this.progressBarBelow.y - this.progressBarOver.height/2;
      Phaser.Display.Align.In.TopRight(this.progressBarBelow, this.bg);
      this.progressBarOver.x = this.progressBarBelow.x;
      this.progressBarOver.sum = this.progressBarOver.width;
      ////////////////////////////////////////////////////////////æ¸¸æˆå…³å¡å±æ€§
      this.enemyKey =  new Array('pig','ridding','granny','octocat');//ç›´æ¥åœ¨ç”Ÿæˆæ•Œäººä½ç½®å†³å®šæ”»å‡»åŠ¨ç”» å¯ä»¥å…±ç”¨ä¸€ä¸ª
      this.enemyBulletKey = new Array('','pie','rock','fireball');
      this.enemySpeed = new Array(-100,-150,-200,-250);
      this.scoreLevel = new Array(10,30,50,100);
      this.level = 0;
      this.iceTo = true;
      ////////////////////////////////////////////////////////////æ•Œæ–¹å­å¼¹
      this.enemyBullets = this.add.group();
      this.enemyBullets.enableBody = true;
      this.enemyBullets.setAll('outOfBoundsKill', true);
      this.enemyBullets.setAll('checkWorldBounds', true);
      ////////////////////////////////////////////////////////////æ•Œæ–¹æ­»äº¡æº…è¡€
      this.bloods = this.add.group();
      this.bloods.enableBody = true;
      ////////////////////////////////////////////////////////////ç§¯åˆ†ç›¸å…³
      this.goldCoin = this.add.group();
      this.coins = this.add.image(0,0,'coins');
      this.coins.x = 100;
      this.number = game.add.retroFont('number', 20, 20, Phaser.RetroFont.TEXT_SET10, 20, 0, 0);///aaa2   a5 24  a2== a22a==3223 b=4 c=5 de=67 fg = 89 h = 0 set10æ— å‰ç¼€ a1~j0 set8æ— å‰ç¼€12~01
      this.imageFont = game.add.image(this.world.centerX/2, 49, this.number);
      this.imageFont.anchor.set(.5,.3);
      this.number.text = "";
      this.number.score = '';
      this.number.table = new Array('a','b','c','d','e','f','g','h','i','j');
      this.score = 0;
      this.displayScore();
    }
    this.dt = 0;
    this.update = function () {
        if (this.life.width<=0 || this.progressBarOver.width<=0) {
            this.game.state.start('over');
        }
        if (this.wires.hp <= 0) {//è†æ£˜å›´å¢™
            this.wires.active = false;
            this.wires.kill();
        }
        if (this.wires.active&&this.wires.act) {
            this.wires.alpha = this.wires.hp / this.wires.hp_;//è†æ£˜å›´å¢™å—æŸ
        }
        if (this.pigs.length>0) {//ç¬¬ä¸€å…³ä¹‹å
            for (var i = 0; i < this.pigs.length; i++) {
                if (this.pigs.getChildAt(i).x <= this.underRails.width+this.wires.width+this.pigs.getChildAt(i).width*1.5&&this.pigs.children[i].key!=='pig') {
                    if (this.pigs.getChildAt(i).active) {
                        this.pigs.getChildAt(i).body.velocity.x = 0;
                        this.pigs.getChildAt(i).animations.play('attack');//åŠ ä¸Šå­å¼¹
                        if(this.dt % 60 == 0&&this.pigs.getChildAt(i).ice==false) { 
                            this.enemyBullet = this.enemyBullets.create(0, 0, this.enemyBulletKey[this.pigs.getChildAt(i).level]);
                            this.enemyBullet.animations.add('bullet');
                            this.enemyBullet.animations.play('bullet');
                            Phaser.Display.Align.To.LeftCenter(this.enemyBullet, this.pigs.getChildAt(i));
                            this.enemyBullet.y += this.enemyBullet.height;
                            if (this.level==2) {
                                this.enemyBullet.x += 100;
                                this.enemyBullet.y -= 100;
                            }
                            this.enemyBullet.body.velocity.x = -300;
                        }
                    }
                }
            }
        }
        this.progressBarOver.width -= this.progressBarOver.sum * .0001;//æ¸¸æˆè¿›åº¦
        if (this.progressBarOver.width <= this.progressBarOver.sum * 0.75 ) {//æ¸¸æˆè¿›åº¦ä¿®æ”¹
            this.level = 1;
        }
        if (this.progressBarOver.width <= this.progressBarOver.sum * 0.5 ) {
            this.level = 2;
        }
        if (this.progressBarOver.width <= this.progressBarOver.sum * 0.25 ) {
            this.level = 3;
        }
        if (this.life.width <= 0) {//ç”Ÿå‘½å€¼
            //gameover
        } 
        if (this.energy.width <= 0) {//èƒ½é‡å€¼
            this.energyEnabled = false;
        } 
        if (this.storm.length>0) {//é£æš´åŒ€é€Ÿå‰è¿›
            for (var i = 0; i < this.storm.length; i++) {
                if (this.storm.getChildAt(i).body.velocity.x < 300) {
                    this.storm.getChildAt(i).body.velocity.x = 300;
                }
            }
        }
        this.game.physics.arcade.overlap(this.wires, this.enemyBullets,function(wires_,bullet){//æ•Œäººæ”»å‡»åˆ°è¾¾è†æ£˜ è€æ€§å‡å€¼
            if (wires_.active) {
                wires_.hp -= 0.1;
                bullet.destroy();
            }
        },null,this);
        this.game.physics.arcade.overlap(this.underRails, this.enemyBullets,function(underRails,bullet){//æ•Œäººæ”»å‡»åˆ°è¾¾é“è½¨  ç”Ÿå‘½å‡å€¼ å°çº¢å¸½
                this.life.width -= this.life.sum * 1/100;
                bullet.destroy();
        },null,this);
        this.game.physics.arcade.overlap(this.underRails, this.pigs,function(underRails,pig){//æ•Œäººåˆ°è¾¾é“è½¨ ç”Ÿå‘½å‡å€¼
                this.life.width -= this.life.sum * 1/10;
                pig.active = false;
                pig.destroy();
        },null,this);
        this.game.physics.arcade.overlap(this.wires, this.pigs,function(wires_,pig){//è†æ£˜é˜»æŒ¡æ•Œäºº
            if (this.wires.active) {
                wires_.hp--;
                // if (wires_.hp % 2 == 0) {
                //     wires_.dt++;
                //     wires_.alpha = 1 - wires_.dt/10;
                // }
                pig.destroy();
            }
        },null,this);
        this.game.physics.arcade.collide(this.storm, this.pigs,function(storm_,pig){//é£æš´æ¨åŠ¨æ•Œäºº
            if (this.ice.length>0) {//å…ˆå†°å†»å†é£æš´
                // if (typeof pig.iceIndex!=="undefined") {//æ£€æµ‹å¯¹è±¡ç±»å‹
                   if (this.ice.getChildAt(pig.iceIndex)) {//æ£€æµ‹å¯¹è±¡å­˜åœ¨
                       this.ice.getChildAt(pig.iceIndex).kill();
                //    }
                }
            }
        },null,this);
        this.game.physics.arcade.overlap(this.stone, this.pigs,function(stone_,pig){//æ»šçŸ³ç¢¾å‹æ•Œäºº
            pig.dt++;
            if (pig.dt==1) {
                pig.anchor.set(.5);
                pig.angle = 90;
                pig.y += 70;
                pig.animations.stop();
                pig.body.velocity.x = 0;
                pig.active = false;
                var that = this;
                game.add.tween(pig).to( { alpha: 0 }, 1000, "Linear", true).onComplete.add(function(){
                    pig.destroy();
                    that.iceTo = true;
                });
                if (this.ice.length>0) {//å…ˆå†°å†»å†æ»šçŸ³
                    // if (typeof pig.iceIndex!=="undefined") {//æ£€æµ‹å¯¹è±¡ç±»å‹
                       if (this.ice.getChildAt(pig.iceIndex)) {//æ£€æµ‹å¯¹è±¡å­˜åœ¨
                           this.ice.getChildAt(pig.iceIndex).kill();
                    //    }
                    }
                }
            }
        },null,this);
        this.game.physics.arcade.overlap(this.weapon.bullets, this.pigs, function (bullet, enemy) {//ç‹¼äººæ”»å‡»
            if (enemy.active==false) {
                return
            }
            this.Flag(bullet);//ç¡®å®šå­å¼¹è½¨é“
            if (bullet.Flag==enemy.courseFlag) {
                enemy.active = false;
                this.blood = this.bloods.create(enemy.x,enemy.y,'blood');//æ•Œæ–¹è¡€æº…å½“åœº
                this.blood.animations.add('blood');
                this.blood.animations.play('blood',120).onComplete.add(function(){//ç”¨ç»„ å½“æ•Œæ–¹åŠ¿åŠ›ç­äº¡é”€æ¯ç»„é‡å»ºç»„ ä¸ç„¶ä¼šæœ‰å†å²é—ç•™é—®é¢˜
                    this.bloods.destroy();
                    this.bloods = this.add.group();
                    this.bloods.enableBody = true;
                },this);
                this.coin = this.goldCoin.create(enemy.x,enemy.y,'goldCoin');//æ•Œæ–¹åŠ¿åŠ›æ­»äº¡åæ‰è½é‡‘å¸å³ä¸ºç§¯åˆ†
                this.add.tween(this.coin).to( { y: this.imageFont.y, x: this.imageFont.x }, 300, "Linear", true).onComplete.add(function(){
                    this.goldCoin.destroy();
                    this.goldCoin = this.add.group();
                },this);
                enemy.destroy();
                this.score += this.scoreLevel[enemy.level];//æŒ‰levelåˆ’åˆ†ç§¯åˆ†
                this.displayScore();//å¯è®¾å®šé‡‘å¸ä¸Šå‡åˆ°æ–‡æœ¬å¯¹è±¡å¤„åŠ¨ç”»å†æ˜¾ç¤ºç§¯åˆ†
                if (enemy.ice==true) {
                    this.ice.getChildAt(enemy.iceIndex).kill();//å½“ç‹¼äººæ­¦å™¨æ¶ˆç­æ•Œäººå å†°æŸ±æ¶ˆè
                }
                bullet.hp--;
                if (bullet.hp==0) {
                    bullet.kill();
                }
            } 
        }, null, this);
        this.dt++;//å¸§å¾ªç¯è®¡æ•°å™¨
        if (this.pigs.length>0 && this.attack) {//æ•Œäººyä¸ç‹¼äººyä¸€è‡´æ—¶è‡ªåŠ¨æ”»å‡»
            for (var i = 0; i < this.pigs.length; i++) {
                // if (this.pigs.getChildAt(i).courseFlag==this.wolf.Flag) {
                    if (this.dt % this.wolf.bulletSpeed == 0) {//å‘å°„å­å¼¹
                        this.weapon.fire();//å­å¼¹ä¸æ€ªç‰©ç¢°æ’åæ£€æµ‹weaponçš„åæ ‡
                        for (var i = 0; i < this.weapon.bullets.length; i++) {
                            this.weapon.bullets.children[i].hp = this.weapon.hp;//æ­¦å™¨è€æ€§å€¼
                            this.weapon.bullets.children[i].hp_ = this.weapon.hp;
                        }
                    }
                // }
            }
        }
        if (this.dt % 60 == 0) {//ç”Ÿæˆæ•Œäºº
            this.courseRnd = this.game.rnd.between(0,5);
            this.pig = this.pigs.create(this.game.world.width,this.courseRnd * 70 + 35,this.enemyKey[this.level]);
            this.pig.animations.add('walk', [0,1, 2, 3], 3, true);
            this.pig.body.velocity.x = this.enemySpeed[this.level];
            this.pig.courseFlag = this.courseRnd;
            this.pig.dt = 0;
            this.pig.ice = false;
            this.pig.active = true;
            this.pig.level = this.level;//ç”¨äºæ›´æ”¹è§’è‰²å¯¹åº”çš„æ”»å‡»ç‰¹æ•ˆ å¦åˆ™å½“ç­‰çº§é€’å‡æ”»å‡»ç‰¹æ•ˆä¼šæ”¹å˜
            if (this.level>0) {
                this.pig.animations.add('attack', [4, 5, 6, 7], 5, true);
            }
            this.pig.animations.play('walk');
        }
        if (this.dt % 600 == 0) {//ç”Ÿæˆbuff 600fps == 10s
            this.rndBuff = this.rnd.between(1,4);
            switch (this.rndBuff) {
                case 1:
                    this.buff = this.add.image(0,0,'energyRegen');
                    break;
                case 2:
                    this.buff = this.add.image(0,0,'energyFull');
                    break;
                case 3:
                    this.buff = this.add.image(0,0,'hearthRegen');
                    break;
                default:
                    this.buff = this.add.image(0,0,'hearthFull');
                    break;
            }
            this.buff.x = this.rnd.between(this.underRails.width+this.wires.width,this.world.width-this.underRails.width);
            this.buff.y = -this.buff.height;
            this.buff.inputEnabled = true;
            this.buff.events.onInputDown.addOnce( function(){
                switch (this.buff.key) {
                    case 'energyRegen':
                        if (this.energy.width < this.energy.sum) {
                            this.energy.width += (this.energy.sum * 1/20);
                        }
                        break;
                    case 'energyFull':
                        if (this.energy.width < this.energy.sum) {
                            this.energy.width = this.energy.sum;
                        }
                        break;
                    case 'hearthRegen':
                        if (this.life.width < this.life.sum) {
                            this.life.width += (this.life.sum * 1/20);
                        }
                        break;
                    default:
                        if (this.life.width < this.life.sum) {
                            this.life.width = this.life.sum;
                        }
                        break;
                }
                this.buff.destroy();
            }, this);
        }
        if (this.buff) {
            this.buff.y += 1;
            if (this.buff.y >= this.world.height) {
                this.buff.destroy();
            }
        }
        if (this.game.input.activePointer.isDown){//è§¦æ‘¸ç‚¹æŒ‰ä¸‹
            var pY = this.game.input.activePointer.y;
            if (pY >= 80 && pY < 150) {//ç¬¬ä¸€é“
                document.title = 'ç¬¬1é“:' + pY;
                this.wolf.Flag = 0;
                this.add.tween(this.wagon).to( { y: this.underRails.y -10 }, 300, 'Linear', true);
                this.add.tween(this.wolf).to( { y: this.wolf.y_ }, 300, 'Linear', true);
            } else if (pY >= 150 && pY < 220) {
                document.title = 'ç¬¬2é“:' + pY;
                this.wolf.Flag = 1;
                this.add.tween(this.wagon).to( { y: this.underRails.y + 60 }, 300, 'Linear', true);
                this.add.tween(this.wolf).to( { y: this.wolf.y_ + 70 }, 300, 'Linear', true);
            } else if (pY >= 220 && pY < 290) {
                document.title = 'ç¬¬3é“:' + pY;
                this.wolf.Flag = 2;
                this.add.tween(this.wagon).to( { y: this.underRails.y + 130 }, 300, 'Linear', true);
                this.add.tween(this.wolf).to( { y: this.wolf.y_ + 140 }, 300, 'Linear', true);
            } else if (pY >= 290 && pY < 360) {
                document.title = 'ç¬¬4é“:' + pY;
                this.wolf.Flag = 3;
                this.add.tween(this.wagon).to( { y: this.underRails.y + 200 }, 300, 'Linear', true);
                this.add.tween(this.wolf).to( { y: this.wolf.y_ + 210 }, 300, 'Linear', true);
            } else if (pY >= 360 && pY < 430) {
                document.title = 'ç¬¬5é“:' + pY;
                this.wolf.Flag = 4;
                this.add.tween(this.wagon).to( { y: this.underRails.y + 270 }, 300, 'Linear', true);
                this.add.tween(this.wolf).to( { y: this.wolf.y_ + 280 }, 300, 'Linear', true);
            } else if (pY >= 430 && pY < 500) {
                document.title = 'ç¬¬6é“:' + pY;
                this.wolf.Flag = 5;
                this.add.tween(this.wagon).to( { y: this.underRails.y + 340 }, 300, 'Linear', true);
                this.add.tween(this.wolf).to( { y: this.wolf.y_ + 350 }, 300, 'Linear', true);
            }
		}
    }
    this.Flag = function(obj){//åˆ¤æ–­å­å¼¹æ‰€åœ¨ç›¸åº”èµ›é“
        var pY = obj.y;
        if (pY >= 80 && pY < 150) {
            obj.Flag = 0;
        } else if (pY >= 150 && pY < 220) {
            obj.Flag = 1;
        } else if (pY >= 220 && pY < 290) {
            obj.Flag = 2;
        } else if (pY >= 290 && pY < 360) {
            obj.Flag = 3;
        } else if (pY >= 360 && pY < 430) {
            obj.Flag = 4;
        } else if (pY >= 430 && pY < 500) {
            obj.Flag = 5;
        }
    }
    this.weaponReplace = function(weapon,axe,fork,target){//æ›¿æ¢æ­¦å™¨ æˆ˜æ–§ é’¢å‰ ç›®æ ‡è€æ€§ //å½“ç‚¹å‡»æŠ€èƒ½å›¾æ ‡é’¢å‰æ—¶ æ­¦å™¨è€æ€§ç›´ä¸Šå‡ä¸º3 å½“é®ç½©ç»“æŸåé™å›1
        if (target==1) {//è½¬æ¢æˆaxe
            if (weapon.hp==3) {//fork
                weapon.hp = 1;
                for (var i = 0; i < weapon.bullets.length; i++) {//æ›´æ¢æ­¦å™¨
                    // weapon.bullets.children[i].texture = axe.texture;
                    weapon.bullets.children[i].hp = weapon.hp;//æ­¦å™¨è€æ€§å€¼
                    weapon.bullets.children[i].hp_ = weapon.hp;
                    console.log(weapon.bullets.children[i].hp);
                }
                return false;
            }
        }
        if (target==2) {//è½¬æ¢æˆfork
            if (weapon.hp==1) {//axe
                weapon.hp = 3;
                for (var i = 0; i < weapon.bullets.length; i++) {//æ›´æ¢æ­¦å™¨
                    // weapon.bullets.children[i].texture = fork.texture;//ä»…ä»…æ›¿æ¢æ­¦å™¨è€æ€§ è§†ä¸ºæ—¶æ•ˆæ€§å¼ºåŒ–
                    weapon.bullets.children[i].hp = weapon.hp;//æ­¦å™¨è€æ€§å€¼
                    weapon.bullets.children[i].hp_ = weapon.hp;
                }
                return false;
            }
        }
    }
    this.skillMask = function(skillIcon,duration,callback){//æŠ€èƒ½å›¾æ ‡é®ç½©å±‚
        var mask = this.add.image(0,0,'mask');
        mask.alpha = 0.3;
        mask.x = skillIcon.x;
        mask.y = skillIcon.y;
        skillIcon.inputEnabled = false;
        game.add.tween(mask).to( { height: 0 }, duration, "Linear", true).onComplete.add(function(){
            mask.destroy();
            skillIcon.inputEnabled = true;
            if (typeof callback!=='undefined') {
                callback();
            }
        });
    }
    this.displayScore = function(){
        this.number.score = '';
        for (var i = 0; i < this.score.toString().length; i++) {
            if (parseInt(this.score.toString().substr(i,1))==0) {
                this.number.score += 'j';
            } else {
                this.number.score += this.number.table[parseInt(this.score.toString().substr(i,1))-1];
            }
        }
        this.number.text = this.number.score;
        gameScore = this.score;
    }
  }

  var menuState = function (game){
      this.create = function(){
          this.stage.backgroundColor = '#374649';
          this.clouds = this.add.image(0,0,'clouds');
          this.title = this.add.image(0,0,'title');
          this.title.anchor.set(.5);
          this.title.x = this.world.centerX;
          this.title.y = this.world.centerY / 1.5;
          this.floor = this.add.image(0,0,'floor');
          this.floor.y = this.world.height - this.floor.height;
          this.btnNew = this.add.button(this.world.centerX - 120, this.world.centerY+25, 'btnNew', function(){
              game.state.start('game');
          }, this, 2, 1, 0);
          this.btnCtn = this.add.button(this.world.centerX - 120, this.btnNew.y+this.btnNew.height, 'btnCtn', function(){
              //æš‚æ— å­˜æ¡£ã€ä¸äºˆè€ƒè™‘
          }, this, 2, 1, 0);
          this.wolf = this.add.image(0,0,'menuWolf');
          this.wolf.y = this.clouds.height;
          this.pig = this.add.image(0,0,'menuPig');
          this.pig.x = this.world.width - this.pig.width;
          this.pig.y = this.clouds.height;
        //   this.font = this.add.retroFont('knightHawks', 31, 25, Phaser.RetroFont.TEXT_SET6, 10, 1, 1);//ç¼“keyå å•ä¸ªå­—ä½“å®½åº¦ é«˜åº¦ æ ·å¼  ã€‚ã€‚ã€‚
        //   this.textFrame = game.add.image(game.world.centerX, game.world.centerY / 4, this.font);
        //   this.textFrame.tint = Math.random() * 0xFFFFFF;
        //   this.textFrame.anchor.set(0.5,1);
        //   this.font.text = "legend of wolf";
        //   this.font.setText("phaser 2\nin the house", false, 0, 8, Phaser.RetroFont.ALIGN_CENTER);//å±…ä¸­ false æ¨ªå‘ true è‡ªåŠ¨åˆ†è¡Œ
        // this.gold_font = game.add.retroFont('gold_font', 16, 16, "!     :() ,?." + Phaser.RetroFont.TEXT_SET10, 20, 0, 0);
        // this.gold_font.text = "phaser brings you retro style bitmap fonts";
        // this.imageFont = game.add.image(game.world.centerX, 48, this.gold_font); //æ–‡å­—è½¬å›¾ç‰‡ 
        // this.imageFont.anchor.set(0.5);
      }
  }
  var overState = function (game){
      this.create = function(){
          this.stage.backgroundColor = '#374649';
          this.clouds = this.add.image(0,0,'clouds');
          this.title = this.add.image(0,0,'title');
          this.title.anchor.set(.5);
          this.title.x = this.world.centerX;
          this.title.y = this.world.centerY / 1.5;
          this.floor = this.add.image(0,0,'floor');
          this.floor.y = this.world.height - this.floor.height;
          this.over = this.add.image(0,0,'over');
          Phaser.Display.Align.In.Center(this.over,this.world).y += this.over.height*1.5;
          this.textScore = this.add.text(this.world.centerX,this.over.y+this.over.height*2.7,gameScore,{fill:'#fff',fontSize:'49px', align: "center"});
          this.textScore.anchor.set(.5);
          this.wolf = this.add.image(0,0,'menuWolf');
          this.wolf.y = this.clouds.height;
          this.pig = this.add.image(0,0,'menuPig');
          this.pig.x = this.world.width - this.pig.width;
          this.pig.y = this.clouds.height;
      }
  }
  var bootState = function(game){
      this.preload = function(){
              ////////////////////////////////////////////////////////////////////////////menuState
          this.load.image('clouds','assets/images/clouds.png');
          this.load.image('title','assets/images/title.png');
          this.load.image('floor','assets/images/floor.png');
          this.load.image('menuWolf','assets/images/wolf-big.png');
          this.load.image('menuPig','assets/images/pig-big.png');
          this.load.spritesheet('btnNew', 'assets/images/menu-sprites1.png', 240, 58);
          this.load.spritesheet('btnCtn', 'assets/images/menu-sprites2.png', 240, 58);
        //   this.load.image('knightHawks', 'assets/font/KNIGHT3.png');
        //   this.load.image('gold_font','assets/font/gold_font.png');
          this.load.image('number','assets/font/number2.png');
          ////////////////////////////////////////////////////////////////////////////gameState
          this.load.image('background','assets/images/background-skillshop.png');
          this.load.image('battlefield','assets/images/battlefield.png');
          this.load.image('sky','assets/images/sky.png');
          this.load.image('earth','assets/images/earth.png');
          this.load.image('under-rails','assets/images/under-rails.png');
          this.load.image('rails','assets/images/rails.png');
          this.load.spritesheet('skills','assets/images/skills.png',53,53,9);
          this.load.image('mask','assets/images/mask.png');/////////////////images sprites
          this.load.image('wagon','assets/sprites/wagon.png');
          this.load.image('wires','assets/sprites/wires.png');
          this.load.atlas('wolf', 'assets/sprites/wolf.png', null, atlas_Wolf);
          this.load.atlas('restore', 'assets/sprites/restore.png', null , atlas_Restore);
          this.load.atlas('rattan', 'assets/sprites/rattan.png', null, atlas_Rattan);
          this.load.atlas('ridding', 'assets/sprites/ridding.png', null, atlas_Ridding);
          this.load.spritesheet('pig','assets/sprites/pig.png',54,342/4,4);
          this.load.image('axe','assets/sprites/axe.png');
          this.load.image('fork','assets/sprites/fork.png');
          this.load.spritesheet('storm','assets/sprites/storm.png',32,31,4);
          this.load.spritesheet('stone','assets/sprites/stone.png',152,101,10);
          this.load.spritesheet('ice','assets/sprites/ice.png',679/7,102,7);
          this.load.spritesheet('blood','assets/sprites/blood-sprite-die.png',115,115,11);
          this.load.spritesheet('granny','assets/sprites/granny.png',85.625,92,8);
          this.load.spritesheet('octocat','assets/sprites/octocat.png',85.625,92,8);///
          this.load.spritesheet('fireball','assets/sprites/fireball-sprite.png',30,30,4);
          this.load.spritesheet('pie','assets/sprites/pie.png',14,13,1);
          this.load.spritesheet('rock','assets/sprites/rock.png',625/5,119,4);
          this.load.image('energy-bar-filled','assets/images/energy-bar-filled.png');//images
          this.load.image('energy-bar','assets/images/energy-bar.png');
          this.load.image('life-bar-filled','assets/images/life-bar-filled.png');
          this.load.image('life-bar','assets/images/life-bar.png');
          this.load.image('progress-bar-below','assets/images/progress-bar-below.png');
          this.load.image('progress-bar-over','assets/images/progress-bar-over.png');
          this.load.image('energyFull','assets/images/energy-full.png');
          this.load.image('energyRegen','assets/images/energy-regen.png');
          this.load.image('hearthFull','assets/images/hearth-full.png');
          this.load.image('hearthRegen','assets/images/hearth-regen.png');
          this.load.image('coins','assets/images/coins.png');
          this.load.image('goldCoin','assets/images/gold-coin.png');
          this.load.image('over','assets/images/over.png');
      }
      this.create = function(){
          game.state.start('menu');
      }
  }
  game.state.add("boot", bootState);
  game.state.add("menu", menuState);
  game.state.add("game", gameState);
  game.state.add("over", overState);
  game.state.start("boot");    
}
</script>
</html>
<!-- 
å¯ä»¥ä½¿é£æš´åœ¨åˆ°è¾¾æ¨ªå±å¤–å›´ä¸€å®šèŒƒå›´æ—¶æ¶ˆå¤±//æ»šçŸ³//æ•Œæ–¹åŠ¿åŠ›    
 -->
